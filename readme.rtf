{\rtf1\ansi\deff0{\fonttbl{\f0 \fswiss Helvetica;}{\f1 Courier;}}
{\colortbl;\red255\green0\blue0;\red0\green0\blue255;}
\widowctrl\hyphauto

{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs36 Set up the Learning VM\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs32 Get the VM\par}
{\pard \ql \f0 \sa180 \li0 \fi0 If you haven't already, {\field{\*\fldinst{HYPERLINK "https://puppet.com/download-learning-vm"}}{\fldrslt{\ul
download the Learning VM
}}}
\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs32 Virtualization setup\par}
{\pard \ql \f0 \sa180 \li0 \fi0 Get an up-to-date version of your preferred virtualization software. {\field{\*\fldinst{HYPERLINK "https://www.virtualbox.org/wiki/Downloads"}}{\fldrslt{\ul
VirtualBox
}}}
 is free and available for Linux, Mac, and Windows systems. VMware has several desktop virtualization applications, including {\field{\*\fldinst{HYPERLINK "https://www.vmware.com/products/fusion/"}}{\fldrslt{\ul
VMware Fusion
}}}
 for Mac and {\field{\*\fldinst{HYPERLINK "https://www.vmware.com/products/workstation/"}}{\fldrslt{\ul
VMware Workstation
}}}
 for Windows.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 The Learning VM OVA file must be {\i imported} rather than opened directly. Launch your virtualization software and find an {\b Import} or {\b Import Appliance} option in the {\b File} menu. If you cannot locate an {\b Import} option, refer to your virtualization software's documentation.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 If you have enough available memory on your host machine, increasing the memory allocation for the VM from the default 3GB to 4GB may improve performance and stability.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs32 Networking configuration\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs28 Offline\par}
{\pard \ql \f0 \sa180 \li0 \fi0 We recommend running the VM on a host-only network without an external internet connection. This avoids any issues related to your site network configuration and changing dependencies provided by remote hosts. All the packages and modules needed to complete the Quest Guide are hosted locally on the VM itself.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 For {\b VirtualBox:}\par}
{\pard \ql \f0 \sa180 \li0 \fi0 To use host-only networking on VirtualBox, you will need to create and configure a new network from the VirtualBox preferences menu.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 Open the VirtualBOx preferences dialog and select the {\b network} section. Select {\b Host-only Networks}. Create a new network, and click the screwdriver icon to the side of the dialog to edit the network configuration. In the {\b Adapter} section, enter the following settings:\par}
{\pard \ql \f0 \sa180 \li0 \fi0 {\b IPv4 Address: 192.168.56.1}\line {\b IPv4 Network Mask: 255.255.255.0}\par}
{\pard \ql \f0 \sa180 \li0 \fi0 In the {\b DHCP Server} section, enter the following settings:\par}
{\pard \ql \f0 \sa180 \li0 \fi0 Check the {\b Enable Server} box\line {\b Server Address: 192.168.56.1}\line {\b Server Mask: 255.255.255.0}\line {\b Lower Address Bound: 192.168.56.110}\line {\b Upper Address Bound: 192.168.56.200}\par}
{\pard \ql \f0 \sa180 \li0 \fi0 Click {\b OK} to accept the adapter configuration changes, and again to exit the preferences dialog. Open the settings section for the Learning VM from the VirtualBox Manager window. Go to the {\b Network} section, select {\b Host-only Adapter} from the drop-down menu, and select the name of the host-only adapter you created from the {\b Name:} drop-down. Click {\b OK} to accept the setting change.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 For {\b VMWare:}\par}
{\pard \ql \f0 \sa180 \li0 \fi0 Open the {\b Settings} dialog for the Learning VM and select the {\b Network} Section. Under the {\b Custom} heading, select the private network adapter option.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs28 Online\par}
{\pard \ql \f0 \sa180 \li0 \fi0 If you would like to run the Learning VM with internet access, set the {\i Network Adapter} to {\i Bridged}. Use an {\i Autodetect} setting if available, or accept the default Network Adapter name. (If you started the VM before making these changes, you may need to restart the VM before the settings will be applied correctly.)\par}
{\pard \ql \f0 \sa180 \li0 \fi0 Note that the Puppet module tool, yum, and RubyGems are configured to use local repositories, so you will not be able to access remote content without manually changing the settings for these tools. While we encourage exploration, we are not currently able to support issues beyond the scope of the Quest Guide.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs32 Log in\par}
{\pard \ql \f0 \sa180 \li0 \fi0 Start the VM. Rather than logging in directly, we suggest using the built-in web terminal or SSH.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 To access the web terminal, open your web browser and navigate to {\f1 http://<VM's IP ADDRESS>:9091}. Follow the instructions show on the splash page to log in.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 On Mac systems, you can use the default Terminal application or a third-party application like iTerm. For Windows, we suggest the free SSH client {\field{\*\fldinst{HYPERLINK "http://www.putty.org/"}}{\fldrslt{\ul
PuTTY
}}}
. Use the credentials provided on the VM console splash page to authenticate.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs32 Get started\par}
{\pard \ql \f0 \sa180 \li0 \fi0 Once the VM is set up and you have connected, you're ready to get started on the interactive lessons in the Quest Guide. Access the Quest Guide by opening a web browser on your host system and entering the Learning VM's IP address in the address bar: {\f1 http://<IP-ADDRESS>}. (Note that you must use {\f1 http}, as {\f1 https} will connect you to the PE console interface.)\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs36 Learning VM Troubleshooting\par}
{\pard \ql \f0 \sa180 \li0 \fi0 For the most up-to-date version of this troubleshooting information, {\field{\*\fldinst{HYPERLINK "https://github.com/puppetlabs/puppet-quest-guide/blob/master/troubleshooting.md"}}{\fldrslt{\ul
check the GitHub repository
}}}
.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs28 I completed a task, but the quest tool doesn't show it as complete\par}
{\pard \ql \f0 \sa180 \li0 \fi0 The quest tool uses a series of {\field{\*\fldinst{HYPERLINK "http://serverspec.org/"}}{\fldrslt{\ul
Serverspec
}}}
 tests for each quest to track task progress, but the match between a task and test isn't always perfect.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 Certain tasks that don't have other testable effects on the system rely on checking your bash history for an entered command. It's possible that you have entered a valid alternate version of the command that wasn't anticipated in our tests.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 For tasks that relate to Puppet code or the contents of other files, we have written the test for a task in a way that doesn't capture a valid syntactical variation.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 You can check the specific matchers by looking at a quest's spec file in the {\f1 /usr/src/puppet-quest-guide/tests} directory. If you find an issue with the tests, please let us know by sending an email to learningvm@puppet.com.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs28 Password Required for the Quest Guide\par}
{\pard \ql \f0 \sa180 \li0 \fi0 The Learning VM's Quest Guide is accessible at {\f1 http://<VM's IP Address>}. Note that this is {\f1 http} and not {\f1 https} which is reserved for the PE console. The PE console will prompt you for a password, while no password is required for the Quest Guide. (The Quest Guide includes a password for the PE console in the Power of Puppet quest: {\b admin/puppetlabs})\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs28 I can't find the VM password\par}
{\pard \ql \f0 \sa180 \li0 \fi0 The Learning VM's password is generated randomly and will be shown on the splash page displayed on the terminal of your virtualization software when you start the VM.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 If you are already logged in via your virtualization software's terminal, you can use the following command to view the password: {\f1 cat /var/local/password}.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 Occasionally, the splash page will not be displayed on the web interface console. This can generally be resolved by refreshing the page.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs28 Does the Learning VM work on vSphere, ESXi, etc.?\par}
{\pard \ql \f0 \sa180 \li0 \fi0 While the VM should be compatible with these platforms, we don't test or support the VM in this context.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs28 I cannot connect to the PE console\par}
{\pard \ql \f0 \sa180 \li0 \fi0 To connect to the PE console, you must use {\f1 https} rather than {\f1 http}.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 The console uses a self-signed certificate, which means that most browsers will show a security warning. To bypass this warning, you may have to click the {\i advanced} link displayed on the warning page.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 It may take some time after the VM is started before all the Puppet services are fully started. If you attempt to connect to the console before the service is started, you will see a 503 error. If you recently started or restarted the VM, or restarted any services in the PE stack, please wait a few minutes before you try to access the PE console. See the section on PE services below.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs28 One of the PE services hasn't started or has crashed\par}
{\pard \ql \f0 \sa180 \li0 \fi0 Because the Learning VM's Puppet services are configured to run in an environment with restricted resources, they may have a longer restart time and may be less stable than is typical of a production installation.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 On restarting the VM, it may take several minutes for the PE services to fully start. If you have restarted the VM and immediately try to connect to the PE console or trigger a Puppet agent run, you may encounter errors until these services have had time to fully start.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 You can check the status of Puppet services with the following command:\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \f1 systemctl --all | grep pe-\par}
{\pard \ql \f0 \sa180 \li0 \fi0 If still observe stopped Puppet-related services (e.g. pe-console-services) several minutes after the VM has started, double check that you have sufficient memory allocated to the VM and available on your host, then use the following script to restart these services in the correct order:\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \f1 restart_pe_services.sh\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs28 My Puppet run fails!\par}
{\pard \ql \f0 \sa180 \li0 \fi0 There are several common reasons for a Puppet run to fail.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 If a syntax error is indicated, please correct the specified file. Note that due to the way syntax is parsed, an error may not always be on the line indicated. For example, a missing comma, bracket, or parenthesis will likely cause a syntax error on a later line.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 If you see an issue including {\f1 connect(2) for "learning.puppetlabs.vm" port 8140} this generally indicates that the {\f1 pe-puppetserver} service is down. See the section above for instructions on checking and restarting PE services.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 Similarly, an error including {\f1 Failed to find facts from PuppetDB at learning.puppetlabs.vm:8140} generally indicates that the {\f1 pe-puppetdb} service is down. Again, refer to the section above for instructions on checking and restarting PE services.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 When triggering a Puppet run via the {\f1 puppet job} tool, you may see an error similar to {\f1 Error running puppet on pasture.puppet.vm: pasture.puppet.vm is not connected to the PCP broker}. A node connects to the PCP broker on its initial Puppet run. The agent nodes created by the {\f1 quest} tool will automatically run Puppet as they are created, which should generally connect the node to the PCP broker. If this initial Puppet run fails, however, the node will not be connected to the PCP broker, resulting in the error shown. To troubleshoot this issue, connect to the agent node directly and manually trigger a Puppet agent run. This will either generate an error message to indicate the cause of the agent run's failure or run successfully and connect the node to the PCP broker.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs28 I cannot import or start the OVA\par}
{\pard \ql \f0 \sa180 \li0 \fi0 Ensure that you have an up-to-date version of your virtualization software installed. Note that the "check for updates" feature of VirtualBox may not always work as expected, so check the website for the most recent version.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 Ensure that virtualization extensions enabled in the BIOS. The steps to do this will be specific to your system, will generally available online.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 If you are using Mac OS X and see {\f1 Unable to retrieve kernel symbols}, {\f1 Failed to initialize monitor device}, or {\f1 Internal error}, please refer to {\field{\*\fldinst{HYPERLINK "https://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=2061791"}}{\fldrslt{\ul
this VMWare knowledge base page
}}}
.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 VirtualBox is not compatible with Hyper-V. You will need to disable Hyper-V on your system to successfully run the VM with VirtualBox.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs28 The Learning VM has no IP address or the IP address will not respond.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 If your network connection has changed since you loaded the VM, it's possible that your IP address is different from that displayed on the Learning VM splash screen. Log in to the VM via the virtualization directly (rather than SSH) and use the {\f1 ifconfig | less} command to show the IP address associated with each network interface. There will be several interfaces listed, including those used for internal docker networking. The correct interface will usually start with {\f1 eth} or {\f1 enp}. If you continue to get no IP address or an invalid IP address, restarting the VM is generally the quickest way to ensure that the network services are correctly reset. (Unfortunately restarting the network service directly isn't always reliable.)\par}
{\pard \ql \f0 \sa180 \li0 \fi0 It is also possible that the bridged adapter interface configured in the VM network settings menu of your virtualization software is incorrect. This can happen if you change from a wired to wireless network after setting the interface for the first time. In the Network setting dialog, check that the name of the adapter matches that of the connection you are currently using.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 If you are using a bridged network adapter, some network configurations may still prevent you from accessing the Learning VM. If this is the case, we recommend that you speak to your site network administrator to see if there are any firewall rules, proxies, or DHCP server setting that might be preventing you from accessing the VM. If you are unable to resolve the issue, we recommend following the directions in the setup guide to configure a host-only network adapter for the VM.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs28 I can't scroll up in my terminal\par}
{\pard \ql \f0 \sa180 \li0 \fi0 The Learning VM uses a tool called tmux to allow us to display the quest status. You can scroll in tmux by first hitting control-b, then [ (left bracket). You will then be able to use the arrow keys to scroll. Press q to exit scrolling.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs28 Still need help?\par}
{\pard \ql \f0 \sa180 \li0 \fi0 If your puppet runs still fail after trying the steps above, check the Puppet Enterprise {\field{\*\fldinst{HYPERLINK "https://docs.puppet.com/pe/latest/release_notes_known_issues.html"}}{\fldrslt{\ul
Known Issues
}}}
 page or feel free to contact us at learningvm@puppet.com. Please include details of your host OS, virtualization software and version, and any details of the site network configuration where you're running the VM (for example, whether there is a proxy or restrictive firewall rules). If there are logs relevant to the issue, you can use scp from your host machine to copy them to a local directory:\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \f1 scp root@<IPADDRESS>:/var/log/messages messages\par}
{\pard \ql \f0 \sa180 \li0 \fi0 On a Windows system wtih {\field{\*\fldinst{HYPERLINK "http://tartarus.org/~simon/putty-snapshots/htmldoc/Chapter5.html#pscp"}}{\fldrslt{\ul
PuTTY PSCP installed
}}}
, you can use {\f1 pscp} from a command prompt:\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \f1 pscp root@<IPADDRESS>:/var/log/messages messages\par}
}
